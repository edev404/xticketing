<!-- CARD HEADER -->
<nz-card nzHoverable class="my-3 mx-2" style="border-radius: 8px; border: 1px solid #CBD7E5;">
    <div class="row">
        <p class="col-sm-6 text-md">
            {{dataTimeOfSearch.month | uppercase}}, {{dataTimeOfSearch.year}}
        </p>
        <p class="col-sm-6 text-md" style="color: #008160;">
            {{pressettlementFilter.company.name}}
        </p>
        <p class="col-sm-6">
            <b class="text-md">Desde&nbsp;&nbsp;</b>
            <span class="text-xs">{{dataTimeOfSearch.fromDate}}, {{pressettlementFilter.fromDate |
                date:'dd/MM/yyyy'}}</span>
        </p>
        <p class="col-sm-6">
            <b class="text-md">Hasta&nbsp;&nbsp;</b>
            <span class="text-xs">{{dataTimeOfSearch.toDate}}, {{pressettlementFilter.toDate |
                date:'dd/MM/yyyy'}}</span>
        </p>
    </div>
</nz-card>
<!-- TABLES -->
<div class="row mx-2">
    <div class="custom-card p-0">
        <!-- NAV Y MENU BUTTONS -->
        <div class="col-sm-12 ps-2 row">
            <div class="col-sm-4 my-2 d-flex align-items-center">
                <button nz-button class="button-white me-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    <img draggable="false" src="../../../../../../../../assets/icon/fi_maximize-2.svg">
                </button>
                <button class="nav-item nav-link gray btn px-3 me-4 module-title" *ngFor="let row of groupBtn"
                    [ngClass]="{'active':periodSelected===row.id}"
                    (click)="periodSelected=row.id;checkPeriodSelected();clearingDetailsData.periodSelected = row.id; setDataDateByRoutes()">
                    {{row.name}}
                </button>
            </div>
            <div class="col-sm-8 d-flex justify-content-end align-items-center">
                <span class="align-bottom">Para ver el <b>detalle</b> de <b>rutas, viajes, vehículos
                        y
                        pasajes</b> de un dato especifico debe seleccionar el que desea ver.</span>
            </div>
        </div>
        <!-- TABLES -->
        <!-- MAIN TABLE -->
        <div class="col-sm-12 p-0 mx-0 mt-2 row" *ngIf="!clearingDetailsData.detailsSelected">
            <div class="col-sm-12 p-0 m-0">
                <nz-table #tableMain [nzData]="clearingDetailsData.detailsShower" [nzShowPagination]="false"
                    [nzScroll]="{ x:'1000px', y: '225px'}" [nzPageSize]="clearingDetailsData.detailsShower.length">
                    <thead>
                        <!-- HEADER 1 -->
                        <tr>
                            <th nzWidth="180px">Desde - Hasta</th>
                            <th nzWidth="100px">Pasajes Transbordos</th>
                            <th nzWidth="100px">Pasajes Descuentos</th>
                            <th nzWidth="100px">Pasajes Tarifa plena</th>
                            <th nzWidth="150px">Total Recaudado</th>
                            <th nzWidth="200px">Valor recuperado descuento</th>
                            <th nzWidth="100px">Total a repartir</th>
                        </tr>
                        <!-- HEADER 2 -->
                        <tr>
                            <th>{{dataGeneralDetail.date}}</th>
                            <th>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.transferValue | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.transferCant}})</p>
                                </div>
                            </th>
                            <th>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.discountPayedValue | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.discountPayedCant}})</p>
                                </div>
                            </th>
                            <th>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.collectValue | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.collectCant}})</p>
                                </div>
                            </th>
                            <th class="align-top">{{dataGeneralDetail.totalCollected | currency}}</th>
                            <th class="align-top">{{dataGeneralDetail.discountValue | currency}}</th>
                            <th>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.distributionTotal | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.totalCant}})</p>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of tableMain.data" style="cursor: pointer;"
                            (click)="clearingDetailsData.detailsSelected = data; searchRouteDetails()">
                            <td>{{data.date}}</td>
                            <td>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                </div>
                            </td>
                            <td>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                </div>
                            </td>
                            <td>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectCant}})</p>
                                </div>
                            </td>
                            <td class="align-top">{{data.totalCollected | currency}}</td>
                            <td class="align-top">{{data.discountValue | currency}}</td>
                            <td>
                                <div class="row p-0 m-0">
                                    <p class="col-sm-12 p-0 m-0">{{data.distributionTotal | currency}}</p>
                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </nz-table>
            </div>
            <!-- INFO TABLE MANI -->
            <div class="col-sm-12 my-2 d-flex justify-content-end align-items-end">
                <span>
                    El <b class="text-green">valor</b> que aparece entre <b>parentesis ( )</b> equivale al <b>número de
                        pasajeros</b>
                </span>
            </div>
        </div>
        <!-- TABLE ROUTES -->
        <div class="col-sm-12 p-0 m-0 my-2 row" *ngIf="clearingDetailsData.detailsSelected">
            <div class="col-sm-12 pe-0 row">
                <!-- TABLE MAIN SHORT -->
                <!-- <div class="col-sm-3">
                    <div class="custom-card h-100">
                        <nz-table #tableMainShort [nzData]="dataDateShower" [nzShowPagination]="false"
                            [nzScroll]="{y: '170px'}" [nzPageSize]="dataDateShower.length">
                            <thead>
                                <tr>
                                    <th nzWidth="180px">Desde - Hasta</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let data of tableMainShort.data" style="cursor: pointer;">
                                    <td>{{data.date}}</td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                </div> -->
                <!-- TABLE ROUTES -->
                <div class="col-sm p-0 m-0 row custom-card" style="margin: 0px 0px 0px 5px !important;">
                    <!-- TITLE TABLE ROUTES -->
                    <div class="col-sm-12 my-2 row">
                        <div class="col-sm-4 d-flex justify-content-start align-items-center">
                            <button nz-button class="button-black mx-2" [nzType]="'primary'"
                                (click)="clearingDetailsData.detailsSelected = undefined ; clearingDetailsData.routesDetailSelected = undefined;clearingDetailsData.passenger = undefined;clearingDetailsData.travelDetailSelected = undefined ; clearingDetailsData.vehicleDetailSelected = undefined">
                                Regresar
                            </button>
                            <h1 class="title-home align-middle">Rutas</h1>
                        </div>
                        <div class="col-sm-8 d-flex justify-content-end align-items-center">
                            <span>
                                El <b class="text-green">valor</b> que aparece entre <b>parentesis ( )</b> equivale al
                                <b>número de pasajeros.</b>
                            </span>
                        </div>
                    </div>
                    <!-- TABLE ROUTES -->
                    <div class="col-sm-12 p-0 m-0">
                        <nz-table #tableRutas [nzData]="clearingDetailsData.routesShower" [nzShowPagination]="false"
                            [nzScroll]="{ x:'1000px', y:'300px'}"
                            [nzPageSize]="clearingDetailsData.routesShower.length">
                            <thead>
                                <tr>
                                    <th>Fechas</th>
                                    <th>Ruta</th>
                                    <th>Pasajes Transbordos</th>
                                    <th>Pasajes Descuentos</th>
                                    <th>Pasajes Tarifa plena</th>
                                    <th>Total Recaudado</th>
                                    <th>Valor recuperado descuento</th>
                                    <th>Total a repartir</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let data of tableRutas.data" style="cursor: pointer;"
                                    (click)="clearingDetailsData.routesDetailSelected = data; searchTravelVehicleDetails()">
                                    <td>{{data.date}}</td>
                                    <td>
                                        {{data.routeName}}
                                    </td>
                                    <td>
                                        <div class="row p-0 m-0">
                                            <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="row p-0 m-0">
                                            <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="row p-0 m-0">
                                            <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectValue}})</p>
                                        </div>
                                    </td>
                                    <td class="align-top">{{data.totalCollected | currency}}</td>
                                    <td class="align-top">{{data.discountValue | currency}}</td>
                                    <td>
                                        <div class="row p-0 m-0">
                                            <p class="col-sm-12 p-0 m-0">{{data.distributionTotal | currency}}</p>
                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 pe-0 row" *ngIf="clearingDetailsData.routesDetailSelected">
                <div class="col-sm-12 pe-0 mt-2">
                    <div class="custom-card d-flex">
                        <div [ngClass]="{'w-50': !resizeLeft && !resizeRight,'w-80': resizeLeft && !resizeRight,'w-20':resizeRight}" style="border-right: 1px solid #CBD7E5; border-radius: 8px;">
                            <!-- TABLE VIAJES -->
                            <div>
                                <div class="ms-2 mt-2 d-flex justify-content-between">
                                    <h1 class="title-home align-middle">Viajes</h1>
                                    <div *ngIf="clearingDetailsData.travelDetailSelected || clearingDetailsData.vehicleDetailSelected">
                                        <div *ngIf="!resizeRight">
                                            <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-right.svg" *ngIf="!resizeLeft" (click)="resizeLeft = !resizeLeft; resizeLeft = true ">
                                            <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-left.svg" *ngIf="resizeLeft" (click)="resizeLeft = !resizeLeft; resizeLeft = false ">
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <nz-table #tableViajes [nzData]="clearingDetailsData.travelsShower"
                                        [nzShowPagination]="false" [nzScroll]="{ x:'1000px', y:'300px'}"
                                        [nzPageSize]="clearingDetailsData.travelsShower.length">
                                        <thead>
                                            <tr>
                                                <th>Viajes</th>
                                                <th *ngIf="!resizeRight">Pasajes Transbordos</th>
                                                <th *ngIf="!resizeRight">Pasajes Descuentos</th>
                                                <th *ngIf="!resizeRight">Pasajes Tarifa plena</th>
                                                <th *ngIf="!resizeRight">Total Recaudado</th>
                                                <th *ngIf="!resizeRight">Valor recuperado descuento</th>
                                                <th *ngIf="!resizeRight">Total a repartir</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of tableViajes.data" style="cursor: pointer;"
                                                (click)="clearingDetailsData.travelDetailSelected = data; clearingDetailsData.vehicleDetailSelected = undefined;searchPassengerDetails(true)">
                                                <td>
                                                    {{data.date | date:'hh:mm:ss aa'}}
                                                </td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                                    </div>
                                                </td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                                    </div>
                                                </td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectCant}})</p>
                                                    </div>
                                                </td>
                                                <td *ngIf="!resizeRight" class="align-top">{{data.totalCollected | currency}}</td>
                                                <td *ngIf="!resizeRight" class="align-top">{{data.discountValue | currency}}</td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.distributionTotal |
                                                            currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </nz-table>
                                </div>
                            </div>
                            <!-- TABLE Vehículos -->
                            <div>
                                <h1 class="title-home align-middle ms-2 mt-2">Vehículos</h1>
                                <div>
                                    <nz-table #tableVehiculos [nzData]="clearingDetailsData.vehiclesShower"
                                        [nzShowPagination]="false" [nzScroll]="{ x:'1000px', y:'300px'}"
                                        [nzPageSize]="clearingDetailsData.vehiclesShower.length">
                                        <thead>
                                            <tr>
                                                <th>Vehículos</th>
                                                <th *ngIf="!resizeRight">Tarjeta</th>
                                                <th *ngIf="!resizeRight">QR</th>
                                                <th *ngIf="!resizeRight">Efectivo</th>
                                                <th *ngIf="!resizeRight">Total Recaudado</th>
                                                <th *ngIf="!resizeRight">Valor recuperado descuento</th>
                                                <th *ngIf="!resizeRight">Total a repartir</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of tableVehiculos.data" style="cursor: pointer;" (click)="clearingDetailsData.vehicleDetailSelected = data; clearingDetailsData.travelDetailSelected = undefined;searchPassengerDetails(false)">
                                                <td>
                                                    {{data.internalNumber}} - {{data.plate}}
                                                </td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                                    </div>
                                                </td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                                    </div>
                                                </td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectCant}})</p>
                                                    </div>
                                                </td>
                                                <td *ngIf="!resizeRight" class="align-top">{{data.totalCollected | currency}}</td>
                                                <td *ngIf="!resizeRight" class="align-top">{{data.discountValue | currency}}</td>
                                                <td *ngIf="!resizeRight">
                                                    <div class="row p-0 m-0">
                                                        <p class="col-sm-12 p-0 m-0">{{data.distributionTotal |
                                                            currency}}</p>
                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </nz-table>
                                </div>
                            </div>
                        </div>

                        <div [ngClass]="{'w-50': !resizeLeft && !resizeRight,'w-20': resizeLeft && !resizeRight,'w-80':resizeRight}">
                            <ng-container *ngIf="clearingDetailsData.travelDetailSelected || clearingDetailsData.vehicleDetailSelected; 
                                then rowSelectedTemplate; else notRowSelected">
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- NO DATA -->
<ng-template #notRowSelected>
    <div nz-row class="card-aling-center">
        <div nz-col [nzSpan]="24" class="" style="text-align: -webkit-center;">
            <div nz-col nzXs="24" nzSm="20" nzMd="14">
                <img draggable="false" style="margin: 40px 0px 20px 0px;" src="../../../../../assets/icon/info_icon.svg"
                    alt="icono-buscar">
                <div nz-col nzSm="24" nzMd="18">
                    <h1 class="title-form" style="place-content: center !important;">
                        Seleccione un dato de la tabla
                    </h1>
                    <h1 class="title-secundary" style="margin-top: 0px;">
                        y podrá visualizar el detalle de cada uno.
                    </h1>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<!-- TABLE TEMPLET SELECT -->
<ng-template #rowSelectedTemplate>
    <div class="ms-2 mt-2 d-flex justify-content-between">
        <div *ngIf="clearingDetailsData.travelDetailSelected || clearingDetailsData.vehicleDetailSelected">
            <div *ngIf="!resizeLeft">
                <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-right.svg" *ngIf="resizeRight" (click)="resizeRight = !resizeRight; resizeRight = false ">
                <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-left.svg" *ngIf="!resizeRight" (click)="resizeRight = !resizeRight; resizeRight = true ">
            </div>
        </div>
        <h1 class="title-home align-middle me-2">Pasajeros</h1>
    </div>
    <nz-table #tablePasajeros [nzData]="clearingDetailsData.passenger" [nzShowPagination]="false"
        [nzScroll]="{ x:'1000px', y:'279px'}" [nzPageSize]="clearingDetailsData.passenger.length">
        <thead>
            <tr>
                <th nzWidth="150px">Identificaci&oacute;n</th>
                <th nzWidth="150px" *ngIf="!resizeLeft">Cuenta</th>
                <th nzWidth="150px" *ngIf="!resizeLeft">Nombre</th>
                <th nzWidth="180px" *ngIf="!resizeLeft">Forma de pago</th>
                <th nzWidth="180px" *ngIf="!resizeLeft">Valor cobrado</th>
                <th nzWidth="170px" *ngIf="!resizeLeft">¿Aplic&oacute; a descuento?</th>
                <th nzWidth="170px" *ngIf="!resizeLeft">Valor descontado</th>
                <th nzWidth="170px" *ngIf="!resizeLeft">¿Es un transbordo?</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of tablePasajeros.data" style="cursor: pointer;">
                <td>CC. {{data.identification}}</td>
                <td *ngIf="!resizeLeft">{{data.account || '-'}}</td>
                <td *ngIf="!resizeLeft">{{data.name}}</td>
                <td *ngIf="!resizeLeft">{{data.paymentType}}</td>
                <td *ngIf="!resizeLeft">{{data.value | currency}}</td>
                <td *ngIf="!resizeLeft" [nzAlign]="'center'">
                    <span class="badge text-bg-success" *ngIf="data.hadDiscount === true">Si</span>
                    <span class="badge text-bg-danger" *ngIf="data.hadDiscount === false">No</span>
                </td>
                <td *ngIf="!resizeLeft">{{data.discountValue ? data.discountValue : 0}}</td>
                <td *ngIf="!resizeLeft" [nzAlign]="'center'">
                    <span class="badge text-bg-success" *ngIf="data.isTransfer === true">Si</span>
                    <span class="badge text-bg-danger" *ngIf="data.isTransfer === false">No</span>
                </td>
          </tr>
        </tbody>
    </nz-table>
</ng-template>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header" style="border: none !important;">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- TABLES -->
                <div class="row mx-2">
                    <div class="custom-card p-0">
                        <!-- NAV Y MENU BUTTONS -->
                        <div class="col-sm-12 ps-2 row">
                            <div class="col-sm-4 my-2 d-flex align-items-center">
                                <button nz-button class="button-white me-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                    <img draggable="false" src="../../../../../../../../assets/icon/fi_maximize-2.svg">
                                </button>
                                <button class="nav-item nav-link gray btn px-3 me-4 module-title" *ngFor="let row of groupBtn"
                                    [ngClass]="{'active':periodSelected===row.id}"
                                    (click)="periodSelected=row.id;checkPeriodSelected();clearingDetailsData.periodSelected = row.id; setDataDateByRoutes()">
                                    {{row.name}}
                                </button>
                            </div>
                            <div class="col-sm-8 d-flex justify-content-end align-items-center">
                                <span class="align-bottom">Para ver el <b>detalle</b> de <b>rutas, viajes, vehículos
                                        y
                                        pasajes</b> de un dato especifico debe seleccionar el que desea ver.</span>
                            </div>
                        </div>
                        <!-- TABLES -->
                        <!-- MAIN TABLE -->
                        <div class="col-sm-12 p-0 mx-0 mt-2 row" *ngIf="!clearingDetailsData.detailsSelected">
                            <div class="col-sm-12 p-0 m-0">
                                <nz-table #tableMain [nzData]="clearingDetailsData.detailsShower" [nzShowPagination]="false"
                                    [nzScroll]="{ x:'1000px', y: '225px'}" [nzPageSize]="clearingDetailsData.detailsShower.length">
                                    <thead>
                                        <!-- HEADER 1 -->
                                        <tr>
                                            <th nzWidth="180px">Desde - Hasta</th>
                                            <th nzWidth="100px">Pasajes Transbordos</th>
                                            <th nzWidth="100px">Pasajes Descuentos</th>
                                            <th nzWidth="100px">Pasajes Tarifa plena</th>
                                            <th nzWidth="150px">Total Recaudado</th>
                                            <th nzWidth="200px">Valor recuperado descuento</th>
                                            <th nzWidth="100px">Total a repartir</th>
                                        </tr>
                                        <!-- HEADER 2 -->
                                        <tr>
                                            <th>{{dataGeneralDetail.date}}</th>
                                            <th>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.transferValue | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.transferCant}})</p>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.discountPayedValue | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.discountPayedCant}})</p>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.collectValue | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.collectCant}})</p>
                                                </div>
                                            </th>
                                            <th class="align-top">{{dataGeneralDetail.totalCollected | currency}}</th>
                                            <th class="align-top">{{dataGeneralDetail.discountValue | currency}}</th>
                                            <th>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{dataGeneralDetail.distributionTotal | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{dataGeneralDetail.totalCant}})</p>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let data of tableMain.data" style="cursor: pointer;"
                                            (click)="clearingDetailsData.detailsSelected = data; searchRouteDetails()">
                                            <td>{{data.date}}</td>
                                            <td>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectCant}})</p>
                                                </div>
                                            </td>
                                            <td class="align-top">{{data.totalCollected | currency}}</td>
                                            <td class="align-top">{{data.discountValue | currency}}</td>
                                            <td>
                                                <div class="row p-0 m-0">
                                                    <p class="col-sm-12 p-0 m-0">{{data.distributionTotal | currency}}</p>
                                                    <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </nz-table>
                            </div>
                            <!-- INFO TABLE MANI -->
                            <div class="col-sm-12 my-2 d-flex justify-content-end align-items-end">
                                <span>
                                    El <b class="text-green">valor</b> que aparece entre <b>parentesis ( )</b> equivale al <b>número de
                                        pasajeros</b>
                                </span>
                            </div>
                        </div>
                        <!-- TABLE ROUTES -->
                        <div class="col-sm-12 p-0 m-0 my-2 row" *ngIf="clearingDetailsData.detailsSelected">
                            <div class="col-sm-12 pe-0 row">
                                <!-- TABLE MAIN SHORT -->
                                <!-- <div class="col-sm-3">
                                    <div class="custom-card h-100">
                                        <nz-table #tableMainShort [nzData]="dataDateShower" [nzShowPagination]="false"
                                            [nzScroll]="{y: '170px'}" [nzPageSize]="dataDateShower.length">
                                            <thead>
                                                <tr>
                                                    <th nzWidth="180px">Desde - Hasta</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let data of tableMainShort.data" style="cursor: pointer;">
                                                    <td>{{data.date}}</td>
                                                </tr>
                                            </tbody>
                                        </nz-table>
                                    </div>
                                </div> -->
                                <!-- TABLE ROUTES -->
                                <div class="col-sm p-0 m-0 row custom-card" style="margin: 0px 0px 0px 5px !important;">
                                    <!-- TITLE TABLE ROUTES -->
                                    <div class="col-sm-12 my-2 row">
                                        <div class="col-sm-4 d-flex justify-content-start align-items-center">
                                            <button nz-button class="button-black mx-2" [nzType]="'primary'"
                                                (click)="clearingDetailsData.detailsSelected = undefined ; clearingDetailsData.routesDetailSelected = undefined;clearingDetailsData.passenger = undefined;clearingDetailsData.travelDetailSelected = undefined ; clearingDetailsData.vehicleDetailSelected = undefined">
                                                Regresar
                                            </button>
                                            <h1 class="title-home align-middle">Rutas</h1>
                                        </div>
                                        <div class="col-sm-8 d-flex justify-content-end align-items-center">
                                            <span>
                                                El <b class="text-green">valor</b> que aparece entre <b>parentesis ( )</b> equivale al
                                                <b>número de pasajeros.</b>
                                            </span>
                                        </div>
                                    </div>
                                    <!-- TABLE ROUTES -->
                                    <div class="col-sm-12 p-0 m-0">
                                        <nz-table #tableRutas [nzData]="clearingDetailsData.routesShower" [nzShowPagination]="false"
                                            [nzScroll]="{ x:'1000px', y:'300px'}"
                                            [nzPageSize]="clearingDetailsData.routesShower.length">
                                            <thead>
                                                <tr>
                                                    <th>Ruta</th>
                                                    <th>Pasajes Transbordos</th>
                                                    <th>Pasajes Descuentos</th>
                                                    <th>Pasajes Tarifa plena</th>
                                                    <th>Total Recaudado</th>
                                                    <th>Valor recuperado descuento</th>
                                                    <th>Total a repartir</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let data of tableRutas.data" style="cursor: pointer;"
                                                    (click)="clearingDetailsData.routesDetailSelected = data; searchTravelVehicleDetails()">
                                                    <td>{{data.date}}</td>
                                                    <td>
                                                        {{data.routeName}}
                                                    </td>
                                                    <td>
                                                        <div class="row p-0 m-0">
                                                            <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="row p-0 m-0">
                                                            <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="row p-0 m-0">
                                                            <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectValue}})</p>
                                                        </div>
                                                    </td>
                                                    <td class="align-top">{{data.totalCollected | currency}}</td>
                                                    <td class="align-top">{{data.discountValue | currency}}</td>
                                                    <td>
                                                        <div class="row p-0 m-0">
                                                            <p class="col-sm-12 p-0 m-0">{{data.distributionTotal | currency}}</p>
                                                            <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </nz-table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-12 pe-0 row" *ngIf="clearingDetailsData.routesDetailSelected">
                                <div class="col-sm-12 pe-0 mt-2">
                                    <div class="custom-card d-flex">
                                        <div [ngClass]="{'w-50': !resizeLeft && !resizeRight,'w-80': resizeLeft && !resizeRight,'w-20':resizeRight}" style="border-right: 1px solid #CBD7E5; border-radius: 8px;">
                                            <!-- TABLE VIAJES -->
                                            <div>
                                                <div class="ms-2 mt-2 d-flex justify-content-between">
                                                    <h1 class="title-home align-middle">Viajes</h1>
                                                    <div *ngIf="clearingDetailsData.travelDetailSelected || clearingDetailsData.vehicleDetailSelected">
                                                        <div *ngIf="!resizeRight">
                                                            <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-right.svg" *ngIf="!resizeLeft" (click)="resizeLeft = !resizeLeft; resizeLeft = true ">
                                                            <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-left.svg" *ngIf="resizeLeft" (click)="resizeLeft = !resizeLeft; resizeLeft = false ">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <nz-table #tableViajes [nzData]="clearingDetailsData.travelsShower"
                                                        [nzShowPagination]="false" [nzScroll]="{ x:'1000px', y:'300px'}"
                                                        [nzPageSize]="clearingDetailsData.travelsShower.length">
                                                        <thead>
                                                            <tr>
                                                                <th>Viajes</th>
                                                                <th *ngIf="!resizeRight">Pasajes Transbordos</th>
                                                                <th *ngIf="!resizeRight">Pasajes Descuentos</th>
                                                                <th *ngIf="!resizeRight">Pasajes Tarifa plena</th>
                                                                <th *ngIf="!resizeRight">Total Recaudado</th>
                                                                <th *ngIf="!resizeRight">Valor recuperado descuento</th>
                                                                <th *ngIf="!resizeRight">Total a repartir</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let data of tableViajes.data" style="cursor: pointer;"
                                                                (click)="clearingDetailsData.travelDetailSelected = data; clearingDetailsData.vehicleDetailSelected = undefined;searchPassengerDetails(true)">
                                                                <td>
                                                                    {{data.date | date:'hh:mm:ss aa'}}
                                                                </td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                                                    </div>
                                                                </td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                                                    </div>
                                                                </td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectCant}})</p>
                                                                    </div>
                                                                </td>
                                                                <td *ngIf="!resizeRight" class="align-top">{{data.totalCollected | currency}}</td>
                                                                <td *ngIf="!resizeRight" class="align-top">{{data.discountValue | currency}}</td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.distributionTotal |
                                                                            currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </nz-table>
                                                </div>
                                            </div>
                                            <!-- TABLE Vehículos -->
                                            <div>
                                                <h1 class="title-home align-middle ms-2 mt-2">Vehículos</h1>
                                                <div>
                                                    <nz-table #tableVehiculos [nzData]="clearingDetailsData.vehiclesShower"
                                                        [nzShowPagination]="false" [nzScroll]="{ x:'1000px', y:'300px'}"
                                                        [nzPageSize]="clearingDetailsData.vehiclesShower.length">
                                                        <thead>
                                                            <tr>
                                                                <th>Veiculos</th>
                                                                <th *ngIf="!resizeRight">Tarjeta</th>
                                                                <th *ngIf="!resizeRight">QR</th>
                                                                <th *ngIf="!resizeRight">Efectivo</th>
                                                                <th *ngIf="!resizeRight">Total Recaudado</th>
                                                                <th *ngIf="!resizeRight">Valor recuperado descuento</th>
                                                                <th *ngIf="!resizeRight">Total a repartir</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let data of tableVehiculos.data" style="cursor: pointer;" (click)="clearingDetailsData.vehicleDetailSelected = data; clearingDetailsData.travelDetailSelected = undefined;searchPassengerDetails(false)">
                                                                <td>
                                                                    {{data.internalNumber}} - {{data.plate}}
                                                                </td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.transferValue | currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.transferCant}})</p>
                                                                    </div>
                                                                </td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.discountPayedValue | currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.discountPayedCant}})</p>
                                                                    </div>
                                                                </td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.collectValue | currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.collectCant}})</p>
                                                                    </div>
                                                                </td>
                                                                <td *ngIf="!resizeRight" class="align-top">{{data.totalCollected | currency}}</td>
                                                                <td *ngIf="!resizeRight" class="align-top">{{data.discountValue | currency}}</td>
                                                                <td *ngIf="!resizeRight">
                                                                    <div class="row p-0 m-0">
                                                                        <p class="col-sm-12 p-0 m-0">{{data.distributionTotal |
                                                                            currency}}</p>
                                                                        <p class="col-sm-12 p-0 m-0 ft-ligth">({{data.totalCant}})</p>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </nz-table>
                                                </div>
                                            </div>
                                        </div>

                                        <div [ngClass]="{'w-50': !resizeLeft && !resizeRight,'w-20': resizeLeft && !resizeRight,'w-80':resizeRight}">
                                            <ng-container *ngIf="clearingDetailsData.travelDetailSelected || clearingDetailsData.vehicleDetailSelected; 
                                                then rowSelectedTemplate; else notRowSelected">
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- NO DATA -->
                <ng-template #notRowSelected>
                    <div nz-row class="card-aling-center">
                        <div nz-col [nzSpan]="24" class="" style="text-align: -webkit-center;">
                            <div nz-col nzXs="24" nzSm="20" nzMd="14">
                                <img draggable="false" style="margin: 40px 0px 20px 0px;" src="../../../../../assets/icon/info_icon.svg"
                                    alt="icono-buscar">
                                <div nz-col nzSm="24" nzMd="18">
                                    <h1 class="title-form" style="place-content: center !important;">
                                        Seleccione un dato de la tabla
                                    </h1>
                                    <h1 class="title-secundary" style="margin-top: 0px;">
                                        y podrá visualizar el detalle de cada uno.
                                    </h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-template>
                <!-- TABLE TEMPLET SELECT -->
                <ng-template #rowSelectedTemplate>
                    <div class="ms-2 mt-2 d-flex justify-content-between">
                        <div *ngIf="clearingDetailsData.travelDetailSelected || clearingDetailsData.vehicleDetailSelected">
                            <div *ngIf="!resizeLeft">
                                <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-right.svg" *ngIf="resizeRight" (click)="resizeRight = !resizeRight; resizeRight = false ">
                                <img draggable="false" src="../../../../../../../../assets/icon/fi_chevrons-left.svg" *ngIf="!resizeRight" (click)="resizeRight = !resizeRight; resizeRight = true ">
                            </div>
                        </div>
                        <h1 class="title-home align-middle me-2">Pasajeros</h1>
                    </div>
                    <nz-table #tablePasajeros [nzData]="clearingDetailsData.passenger" [nzShowPagination]="false"
                        [nzScroll]="{ x:'1000px', y:'279px'}" [nzPageSize]="clearingDetailsData.passenger.length">
                        <thead>
                            <tr>
                                <th nzWidth="150px">Identificaci&oacute;n</th>
                                <th nzWidth="150px" *ngIf="!resizeLeft">Cuenta</th>
                                <th nzWidth="150px" *ngIf="!resizeLeft">Nombre</th>
                                <th nzWidth="180px" *ngIf="!resizeLeft">Forma de pago</th>
                                <th nzWidth="180px" *ngIf="!resizeLeft">Valor cobrado</th>
                                <th nzWidth="170px" *ngIf="!resizeLeft">¿Aplic&oacute; a descuento?</th>
                                <th nzWidth="170px" *ngIf="!resizeLeft">Valor descontado</th>
                                <th nzWidth="170px" *ngIf="!resizeLeft">¿Es un transbordo?</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of tablePasajeros.data" style="cursor: pointer;">
                                <td>CC. {{data.identification}}</td>
                                <td *ngIf="!resizeLeft">{{data.account || '-'}}</td>
                                <td *ngIf="!resizeLeft">{{data.name}}</td>
                                <td *ngIf="!resizeLeft">{{data.paymentType}}</td>
                                <td *ngIf="!resizeLeft">{{data.value | currency}}</td>
                                <td *ngIf="!resizeLeft" [nzAlign]="'center'">
                                    <span class="badge text-bg-success" *ngIf="data.hadDiscount === true">Si</span>
                                    <span class="badge text-bg-danger" *ngIf="data.hadDiscount === false">No</span>
                                </td>
                                <td *ngIf="!resizeLeft">{{data.discountValue ? data.discountValue : 0}}</td>
                                <td *ngIf="!resizeLeft" [nzAlign]="'center'">
                                    <span class="badge text-bg-success" *ngIf="data.isTransfer === true">Si</span>
                                    <span class="badge text-bg-danger" *ngIf="data.isTransfer === false">No</span>
                                </td>
                        </tr>
                        </tbody>
                    </nz-table>
                </ng-template>
            </div>
        </div>
    </div>
</div>